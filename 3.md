# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ2: –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏–≤–∞–Ω–∏–µ —Ü–∏–∫–ª–æ–≤

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É (–ø–æ—à–∞–≥–æ–≤–æ)

### –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#1-–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
2. [–ö–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–æ–≥—Ä–∞–º–º](#2-–∫–æ–º–ø–∏–ª—è—Ü–∏—è-–ø—Ä–æ–≥—Ä–∞–º–º)
3. [–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤](#3-–∑–∞–ø—É—Å–∫-—Ç–µ—Å—Ç–æ–≤)
4. [–ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤](#4-–∞–Ω–∞–ª–∏–∑-—Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)
5. [–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á](#5-–æ–ø–∏—Å–∞–Ω–∏–µ-–∑–∞–¥–∞—á)

---

## 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 1.1 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

–ù–∞ macOS (MacBook Air M1) —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Homebrew (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ GCC (–¥–ª—è OpenMP)
brew install gcc

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Open MPI
brew install open-mpi

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∏ matplotlib –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
brew install python3
pip3 install matplotlib numpy
```

### 1.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ GCC
gcc --version

# –ü—Ä–æ–≤–µ—Ä–∫–∞ MPI
mpirun --version

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Python
python3 --version
```

---

## 2. –ö–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–æ–≥—Ä–∞–º–º

### 2.1 –ö–æ–º–ø–∏–ª—è—Ü–∏—è –≤—Å–µ—Ö –ø—Ä–æ–≥—Ä–∞–º–º

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± - —Å–æ–±—Ä–∞—Ç—å –≤—Å—ë —Å—Ä–∞–∑—É:

```bash
make all
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Å–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç:
- –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –≤—Å–µ—Ö –∑–∞–¥–∞—á
- OpenMP –≤–µ—Ä—Å–∏–∏ (—ç—Ç–∞–ª–æ–Ω–Ω–∞—è –∏ –∑–∞–¥–∞—á–∞ 2–≥)
- MPI –≤–µ—Ä—Å–∏–∏ (–∑–∞–¥–∞—á–∞ 1–µ –∏ –∑–∞–¥–∞—á–∞ 3–∂)

### 2.2 –í—ã–±–æ—Ä–æ—á–Ω–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –≤–µ—Ä—Å–∏–∏:

```bash
# –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏
make sequential

# –¢–æ–ª—å–∫–æ OpenMP –≤–µ—Ä—Å–∏–∏
make openmp

# –¢–æ–ª—å–∫–æ MPI –≤–µ—Ä—Å–∏–∏
make mpi
```

### 2.3 –ö–æ–º–ø–∏–ª—è—Ü–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º

–í—ã –º–æ–∂–µ—Ç–µ —Å–æ–±—Ä–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É:

```bash
# –≠—Ç–∞–ª–æ–Ω–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
make reference_sequential

# –≠—Ç–∞–ª–æ–Ω–Ω–∞—è OpenMP –≤–µ—Ä—Å–∏—è
make reference_openmp

# –ó–∞–¥–∞—á–∞ 1–µ MPI –≤–µ—Ä—Å–∏—è
make task1e_mpi

# –ò —Ç.–¥.
```

### 2.4 –û—á–∏—Å—Ç–∫–∞

```bash
# –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
make clean

# –£–¥–∞–ª–∏—Ç—å —Ç–æ–ª—å–∫–æ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã
make clean-bin

# –£–¥–∞–ª–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
make clean-results
```

---

## 3. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

### 3.1 –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:

```bash
# –°–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º (—Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–π —Ä–∞–∑)
chmod +x run_all_tests.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
./run_all_tests.sh
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
- –ó–∞–ø—É—Å—Ç–∏—Ç –≤—Å–µ –∑–∞–¥–∞—á–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- –ü—Ä–æ–≤–µ—Ä–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –°–æ—Ö—Ä–∞–Ω–∏—Ç –≤—Å–µ –ª–æ–≥–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `results/`

### 3.2 –†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º

#### –≠—Ç–∞–ª–æ–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞

```bash
# –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
./reference_sequential

# OpenMP –≤–µ—Ä—Å–∏—è —Å 1 –ø–æ—Ç–æ–∫–æ–º
export OMP_NUM_THREADS=1
./reference_openmp

# OpenMP –≤–µ—Ä—Å–∏—è —Å 2 –ø–æ—Ç–æ–∫–∞–º–∏
export OMP_NUM_THREADS=2
./reference_openmp

# OpenMP –≤–µ—Ä—Å–∏—è —Å 3 –ø–æ—Ç–æ–∫–∞–º–∏
export OMP_NUM_THREADS=3
./reference_openmp

# OpenMP –≤–µ—Ä—Å–∏—è —Å 4 –ø–æ—Ç–æ–∫–∞–º–∏
export OMP_NUM_THREADS=4
./reference_openmp
```

#### –ó–∞–¥–∞—á–∞ 1–µ (MPI)

```bash
# –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
./task1e_sequential

# MPI –≤–µ—Ä—Å–∏—è —Å 1 –ø—Ä–æ—Ü–µ—Å—Å–æ–º
mpirun -np 1 ./task1e_mpi

# MPI –≤–µ—Ä—Å–∏—è —Å 2 –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
mpirun -np 2 ./task1e_mpi

# MPI –≤–µ—Ä—Å–∏—è —Å 3 –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
mpirun -np 3 ./task1e_mpi

# MPI –≤–µ—Ä—Å–∏—è —Å 4 –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
mpirun -np 4 ./task1e_mpi
```

#### –ó–∞–¥–∞—á–∞ 2–≥ (OpenMP)

```bash
# –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
./task2g_sequential

# OpenMP –≤–µ—Ä—Å–∏—è —Å —Ä–∞–∑–Ω—ã–º —á–∏—Å–ª–æ–º –ø–æ—Ç–æ–∫–æ–≤
export OMP_NUM_THREADS=1
./task2g_openmp

export OMP_NUM_THREADS=2
./task2g_openmp

export OMP_NUM_THREADS=3
./task2g_openmp

export OMP_NUM_THREADS=4
./task2g_openmp
```

#### –ó–∞–¥–∞—á–∞ 3–∂ (MPI)

```bash
# –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
./task3zh_sequential

# MPI –≤–µ—Ä—Å–∏—è —Å —Ä–∞–∑–Ω—ã–º —á–∏—Å–ª–æ–º –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
mpirun -np 1 ./task3zh_mpi
mpirun -np 2 ./task3zh_mpi
mpirun -np 3 ./task3zh_mpi
mpirun -np 4 ./task3zh_mpi
```

### 3.3 –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –≤–µ—Ä—Å–∏–π –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ–≤–ø–∞–¥–∞—é—Ç:

```bash
# –î–ª—è –∑–∞–¥–∞—á–∏ 1–µ
diff result_task1e_seq.txt result_task1e_mpi.txt

# –î–ª—è –∑–∞–¥–∞—á–∏ 2–≥
diff result_task2g_seq.txt result_task2g_omp.txt

# –î–ª—è –∑–∞–¥–∞—á–∏ 3–∂
diff result_task3zh_seq.txt result_task3zh_mpi.txt
```

–ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ `diff` –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–≤–µ–ª–∞ - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–¥–µ–Ω—Ç–∏—á–Ω—ã ‚úì

---

## 4. –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### 4.1 –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤

```bash
# –°–¥–µ–ª–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º (—Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–π —Ä–∞–∑)
chmod +x analyze_results.py

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑
python3 analyze_results.py
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
- –ò–∑–≤–ª–µ—á–µ—Ç –≤—Ä–µ–º–µ–Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏–∑ –≤—Å–µ—Ö –ª–æ–≥–æ–≤
- –í—ã—á–∏—Å–ª–∏—Ç —É—Å–∫–æ—Ä–µ–Ω–∏–µ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- –ü–æ—Å—Ç—Ä–æ–∏—Ç –≥—Ä–∞—Ñ–∏–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏
- –°–æ—Ö—Ä–∞–Ω–∏—Ç –≥—Ä–∞—Ñ–∏–∫–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `results/` –≤ —Ñ–æ—Ä–º–∞—Ç–µ PNG

### 4.2 –†—É—á–Ω–æ–π –∞–Ω–∞–ª–∏–∑

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `results/`:
- `*_seq.log` - –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- `*_omp_N.log` - –≤—Ä–µ–º—è OpenMP —Å N –ø–æ—Ç–æ–∫–∞–º–∏
- `*_mpi_N.log` - –≤—Ä–µ–º—è MPI —Å N –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏

–§–æ—Ä–º—É–ª—ã –¥–ª—è —Ä–∞—Å—á–µ—Ç–æ–≤:
- **–£—Å–∫–æ—Ä–µ–Ω–∏–µ**: S(p) = T‚ÇÅ / T‚Çö
  - –≥–¥–µ T‚ÇÅ - –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
  - T‚Çö - –≤—Ä–µ–º—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–∞ p –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞—Ö
  
- **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: E(p) = S(p) / p

---

## 5. –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á

### 5.1 –≠—Ç–∞–ª–æ–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞

**–ö–æ–¥:**
```c
for (i = 0; i < ISIZE; i++) {
    for (j = 0; j < JSIZE; j++) {
        a[i][j] = sin(2 * a[i][j]);
    }
}
```

**–ê–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
- –í–µ–∫—Ç–æ—Ä –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è: <"=", "=">
- –¢–∏–ø –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: –Ω–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏)
- –†–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏–≤–∞–Ω–∏–µ: –º–æ–∂–Ω–æ —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏—Ç—å –ª—é–±–æ–π —Ü–∏–∫–ª

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- OpenMP: —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–µ–Ω –≤–Ω–µ—à–Ω–∏–π —Ü–∏–∫–ª –ø–æ i —Å `#pragma omp parallel for`

---

### 5.2 –ó–∞–¥–∞—á–∞ 1–µ (MPI)

**–ö–æ–¥:**
```c
for (i = 1; i < ISIZE; i++) {
    for (j = 8; j < JSIZE; j++) {
        a[i][j] = sin(5 * a[i-1][j-8]);
    }
}
```

**–ê–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: a[i][j] –∑–∞–≤–∏—Å–∏—Ç –æ—Ç a[i-1][j-8]
- –í–µ–∫—Ç–æ—Ä —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è: (1, 8)
- –í–µ–∫—Ç–æ—Ä –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è: <"=", "=">
- –¢–∏–ø: –∏—Å—Ç–∏–Ω–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –ø–æ –¥–∞–Ω–Ω—ã–º (true dependence)

**–†–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏–≤–∞–Ω–∏–µ:**
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –ø–æ i (—á–∏—Ç–∞–µ–º i-1)
- –ú–æ–∂–Ω–æ —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏—Ç—å –ø–æ j (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Ü–∏–∫–ª)
- MPI: —Ä–∞–∑–¥–µ–ª—è–µ–º —Å—Ç–æ–ª–±—Ü—ã –º–µ–∂–¥—É –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏

---

### 5.3 –ó–∞–¥–∞—á–∞ 2–≥ (OpenMP)

**–ö–æ–¥:**
```c
for (i = 0; i < ISIZE - 3; i++) {
    for (j = 2; j < JSIZE; j++) {
        a[i][j] = sin(0.1 * a[i+3][j-2]);
    }
}
```

**–ê–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: a[i][j] –∑–∞–≤–∏—Å–∏—Ç –æ—Ç a[i+3][j-2]
- –í–µ–∫—Ç–æ—Ä —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è: (-3, 2)
- –í–µ–∫—Ç–æ—Ä –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è: <"-", "=">
- –¢–∏–ø: –∞–Ω—Ç–∏–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å (anti-dependence)

**–†–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏–≤–∞–Ω–∏–µ:**
- –ß–∏—Ç–∞–µ–º –∏–∑ –±—É–¥—É—â–∏—Ö –∏—Ç–µ—Ä–∞—Ü–∏–π (i+3)
- –ú–æ–∂–Ω–æ —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏—Ç—å –≤–Ω–µ—à–Ω–∏–π —Ü–∏–∫–ª –ø–æ i
- OpenMP: `#pragma omp parallel for` –ø–æ i

---

### 5.4 –ó–∞–¥–∞—á–∞ 3–∂ (MPI)

**–ö–æ–¥:**
```c
// –ü–µ—Ä–≤—ã–π —Ü–∏–∫–ª
for (i = 0; i < ISIZE; i++) {
    for (j = 0; j < JSIZE; j++) {
        a[i][j] = sin(0.1 * a[i][j]);
    }
}

// –í—Ç–æ—Ä–æ–π —Ü–∏–∫–ª
for (i = 0; i < ISIZE - 1; i++) {
    for (j = 2; j < JSIZE; j++) {
        b[i][j] = a[i+1][j-2] * 1.5;
    }
}
```

**–ê–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
- –ü–µ—Ä–≤—ã–π —Ü–∏–∫–ª: –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏ (–º–æ–∂–Ω–æ —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏—Ç—å –ª—é–±–æ–π —Ü–∏–∫–ª)
- –í—Ç–æ—Ä–æ–π —Ü–∏–∫–ª: –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –º–∞—Å—Å–∏–≤–∞ a, –Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ b (–Ω–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Ü–∏–∫–ª–∞)
- –ú–µ–∂–¥—É —Ü–∏–∫–ª–∞–º–∏: –ø–æ—Ç–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å (flow dependence) - –≤—Ç–æ—Ä–æ–π —Ü–∏–∫–ª —á–∏—Ç–∞–µ—Ç a, –∑–∞–ø–∏—Å–∞–Ω–Ω—ã–π –ø–µ—Ä–≤—ã–º

**–†–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏–≤–∞–Ω–∏–µ:**
- –û–±–∞ —Ü–∏–∫–ª–∞ –º–æ–∂–Ω–æ —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏—Ç—å
- MPI: —Ä–∞–∑–¥–µ–ª—è–µ–º —Å—Ç—Ä–æ–∫–∏ –º–µ–∂–¥—É –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
- –¢—Ä–µ–±—É–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É —Ü–∏–∫–ª–∞–º–∏ (–æ–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏)

---

## 6. –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (–¥–ª—è –Ω–µ—Ç–µ—Ä–ø–µ–ª–∏–≤—ã—Ö)

```bash
# 1. –°–æ–±—Ä–∞—Ç—å –≤—Å–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã
make all

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
chmod +x run_all_tests.sh
./run_all_tests.sh

# 3. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏
python3 analyze_results.py

# 4. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏
open results/*.png
```

---

## 7. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
lab_2__/
‚îú‚îÄ‚îÄ Makefile                    # –§–∞–π–ª —Å–±–æ—Ä–∫–∏
‚îú‚îÄ‚îÄ run_all_tests.sh           # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
‚îú‚îÄ‚îÄ analyze_results.py         # –°–∫—Ä–∏–ø—Ç –∞–Ω–∞–ª–∏–∑–∞ –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
‚îú‚îÄ‚îÄ –ò–ù–°–¢–†–£–ö–¶–ò–Ø.md              # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îÇ
‚îú‚îÄ‚îÄ reference_sequential.c      # –≠—Ç–∞–ª–æ–Ω–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
‚îú‚îÄ‚îÄ reference_openmp.c         # –≠—Ç–∞–ª–æ–Ω–Ω–∞—è OpenMP –≤–µ—Ä—Å–∏—è
‚îÇ
‚îú‚îÄ‚îÄ task1e_sequential.c        # –ó–∞–¥–∞—á–∞ 1–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è
‚îú‚îÄ‚îÄ task1e_mpi.c              # –ó–∞–¥–∞—á–∞ 1–µ MPI
‚îÇ
‚îú‚îÄ‚îÄ task2g_sequential.c        # –ó–∞–¥–∞—á–∞ 2–≥ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è
‚îú‚îÄ‚îÄ task2g_openmp.c           # –ó–∞–¥–∞—á–∞ 2–≥ OpenMP
‚îÇ
‚îú‚îÄ‚îÄ task3zh_sequential.c       # –ó–∞–¥–∞—á–∞ 3–∂ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è
‚îú‚îÄ‚îÄ task3zh_mpi.c             # –ó–∞–¥–∞—á–∞ 3–∂ MPI
‚îÇ
‚îî‚îÄ‚îÄ results/                   # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
    ‚îú‚îÄ‚îÄ *.log                  # –õ–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
    ‚îî‚îÄ‚îÄ *.png                  # –ì—Ä–∞—Ñ–∏–∫–∏ —É—Å–∫–æ—Ä–µ–Ω–∏—è –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
```

---

## 8. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: "mpirun: command not found"
**–†–µ—à–µ–Ω–∏–µ:**
```bash
brew install open-mpi
```

### –ü—Ä–æ–±–ª–µ–º–∞: OpenMP –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ GCC –≤–º–µ—Å—Ç–æ Clang:
```bash
brew install gcc
# –ò–∑–º–µ–Ω–∏—Ç–µ CC –≤ Makefile –Ω–∞ gcc-13 (–∏–ª–∏ –≤–∞—à—É –≤–µ—Ä—Å–∏—é)
```

### –ü—Ä–æ–±–ª–µ–º–∞: "No module named 'matplotlib'"
**–†–µ—à–µ–Ω–∏–µ:**
```bash
pip3 install matplotlib numpy
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü—Ä–æ–≥—Ä–∞–º–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ
**–†–µ—à–µ–Ω–∏–µ:** –ò–∑–º–µ–Ω–∏—Ç–µ ISIZE –∏ JSIZE –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–æ–≤ .c –Ω–∞ –º–µ–Ω—å—à–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1000).

### –ü—Ä–æ–±–ª–µ–º–∞: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:** –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏–∑-–∑–∞ –ø–æ—Ä—è–¥–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π. –ù–µ–±–æ–ª—å—à–∏–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è (–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –º–∞—à–∏–Ω–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏) –¥–æ–ø—É—Å—Ç–∏–º—ã.

---

## 9. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã ISIZE –∏ JSIZE

–í –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
```c
#define ISIZE 5000
#define JSIZE 5000
```

–≠—Ç–æ –¥–∞–µ—Ç –º–∞—Ç—Ä–∏—Ü—É 5000√ó5000 = 25 –º–∏–ª–ª–∏–æ–Ω–æ–≤ —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –∏–∑–º–µ—Ä–∏–º–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ–Ω—å—à–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1000√ó1000).

### –ß–∏—Å–ª–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤/–ø–æ—Ç–æ–∫–æ–≤

–ü—Ä–æ–≥—Ä–∞–º–º—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–æ 4 —è–¥–µ—Ä (—Å–æ–≥–ª–∞—Å–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –∑–∞–¥–∞–Ω–∏—è).

–í—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —ç—Ç–æ –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö, —É–∫–∞–∑–∞–≤ –¥—Ä—É–≥–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è.

---

## 10. –ß—Ç–æ —Å–¥–∞–≤–∞—Ç—å

1. **–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥** –≤—Å–µ—Ö –ø—Ä–æ–≥—Ä–∞–º–º (.c —Ñ–∞–π–ª—ã)
2. **Makefile** –¥–ª—è —Å–±–æ—Ä–∫–∏
3. **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã** –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–ª–æ–≥–∏ –∏–∑ results/)
4. **–ì—Ä–∞—Ñ–∏–∫–∏** —É—Å–∫–æ—Ä–µ–Ω–∏—è –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (.png —Ñ–∞–π–ª—ã)
5. **–û—Ç—á–µ—Ç** —Å:
   - –ê–Ω–∞–ª–∏–∑–æ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏
   - –û–±—ä—è—Å–Ω–µ–Ω–∏–µ–º –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏–≤–∞–Ω–∏—è
   - –¢–∞–±–ª–∏—Ü–µ–π —Å –≤—Ä–µ–º–µ–Ω–∞–º–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
   - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –∫ –≥—Ä–∞—Ñ–∏–∫–∞–º
   - –í—ã–≤–æ–¥–∞–º–∏ –æ–± —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ä–∞—Å–ø–∞—Ä–∞–ª–ª–µ–ª–∏–≤–∞–Ω–∏—è

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–º–æ—â—å

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—é –∏–ª–∏ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç—É.

**–£–¥–∞—á–∏ –≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã! üöÄ**
