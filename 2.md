# –®–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ –±—ã—Å—Ç—Ä–æ–º—É –∑–∞–ø—É—Å–∫—É

## üîÑ –ü–æ–ª–Ω—ã–π –∑–∞–ø—É—Å–∫ —Å –Ω—É–ª—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –®–∞–≥ 0: –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∫–æ–º–ø–∏–ª—è—Ü–∏–π

```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /Users/stepankaldyshev/C/par_prog_2/lab_2

# –£–¥–∞–ª–∏—Ç—å —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ sequential/
rm -f sequential/reference sequential/task1e sequential/task2g sequential/task3zh

# –£–¥–∞–ª–∏—Ç—å —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ parallel/
rm -f parallel/reference_mpi parallel/task1e_mpi parallel/task2g_omp parallel/task3zh_mpi

# –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
rm -rf results/
rm -f result_*.txt
rm -rf benchmark_logs/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å—ë —É–¥–∞–ª–µ–Ω–æ (–¥–æ–ª–∂–Ω—ã –æ—Å—Ç–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ .c –∏ .sh —Ñ–∞–π–ª—ã)
ls sequential/
ls parallel/
```

### –®–∞–≥ 1: –î–∞—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ —Å–∫—Ä–∏–ø—Ç—ã
```bash
chmod +x *.sh
```

### –®–∞–≥ 2: –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë
```bash
./compile.sh
```

### –®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏
```bash
./run_sequential.sh
```

### –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏
```bash
./run_parallel.sh
```

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å
```bash
./verify.sh
```

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (5 –∫–æ–º–∞–Ω–¥)

```bash
# 1. –î–∞—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
chmod +x *.sh

# 2. –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã
./compile.sh

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏
./run_sequential.sh

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏
./run_parallel.sh

# 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å
./verify.sh
```

## –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫

### –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å GCC
gcc-14 --version || gcc-13 --version || gcc --version

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å MPI
which mpicc
which mpirun

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Python
python3 --version
```

### –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ–≥–æ:
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
brew install gcc open-mpi python3
pip3 install matplotlib numpy
```

### –ö–æ–º–ø–∏–ª—è—Ü–∏—è –≤—Ä—É—á–Ω—É—é (–µ—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç):

```bash
# –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ
gcc -o sequential/reference sequential/reference.c -lm
gcc -o sequential/task1e sequential/task1e.c -lm
gcc -o sequential/task2g sequential/task2g.c -lm
gcc -o sequential/task3zh sequential/task3zh.c -lm

# MPI (–Ω–∞–π–¥–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å –∫ gcc)
mpicc -o parallel/reference_mpi parallel/reference_mpi.c -lm
mpicc -o parallel/task1e_mpi parallel/task1e_mpi.c -lm
mpicc -o parallel/task3zh_mpi parallel/task3zh_mpi.c -lm

# OpenMP (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∞—à—É –≤–µ—Ä—Å–∏—é gcc)
gcc-14 -fopenmp -o parallel/task2g_omp parallel/task2g_omp.c -lm
# –∏–ª–∏
/opt/homebrew/bin/gcc-14 -fopenmp -o parallel/task2g_omp parallel/task2g_omp.c -lm
```

### –ó–∞–ø—É—Å–∫ –æ–¥–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã –≤—Ä—É—á–Ω—É—é:

```bash
# –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è
./sequential/reference

# MPI —Å 4 –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
mpirun -np 4 ./parallel/reference_mpi

# OpenMP —Å 4 –ø–æ—Ç–æ–∫–∞–º–∏
export OMP_NUM_THREADS=4
./parallel/task2g_omp
```

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤—Ä—É—á–Ω—É—é:

```bash
diff results/result_reference.txt results/parallel/result_reference_mpi_1.txt
```

## –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç—á–µ—Ç–∞

### –ü—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± - –∑–∞–ø—É—Å—Ç–∏—Ç—å –±–µ–Ω—á–º–∞—Ä–∫:
```bash
chmod +x benchmark.sh
./benchmark.sh
```

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—É–¥—É—Ç –≤ `benchmark_logs/times.txt`

### –ò–∑–≤–ª–µ—á—å —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–∞:
```bash
cat benchmark_logs/times.txt | grep "–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è" | grep -o '[0-9]*\.[0-9]*'
```

## –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤

1. –û—Ç–∫—Ä–æ–π—Ç–µ `analyze_results.py`
2. –ó–∞–º–µ–Ω–∏—Ç–µ –ø—Ä–∏–º–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ –≤–∞—à–∏:
   ```python
   reference_times = np.array([–≤–∞—à–∏_–¥–∞–Ω–Ω—ã–µ])
   ```
3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ:
   ```bash
   python3 analyze_results.py
   ```

## –§–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –æ—Ç—á–µ—Ç–∞

| –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | –í—Ä–µ–º—è (—Å–µ–∫) | –£—Å–∫–æ—Ä–µ–Ω–∏–µ | –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å |
|-------------|-------------|-----------|---------------|
| 1 –ø—Ä–æ—Ü–µ—Å—Å   | 10.0        | 1.0       | 100%          |
| 2 –ø—Ä–æ—Ü–µ—Å—Å–∞  | 5.2         | 1.92      | 96%           |
| 4 –ø—Ä–æ—Ü–µ—Å—Å–∞  | 2.8         | 3.57      | 89%           |
| 8 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ | 1.6         | 6.25      | 78%           |

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

```bash
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —è–¥–µ—Ä
sysctl -n hw.ncpu

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–µ
sysctl -n machdep.cpu.brand_string

# –î–æ—Å—Ç—É–ø–Ω–∞—è –ø–∞–º—è—Ç—å
vm_stat | head -5
```

## –û—á–∏—Å—Ç–∫–∞

```bash
# –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–∏
rm sequential/reference sequential/task*
rm parallel/reference_mpi parallel/task*

# –£–¥–∞–ª–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
rm -rf results/
rm -f result_*.txt

# –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞
make clean  # –µ—Å–ª–∏ –µ—Å—Ç—å Makefile
```

## –¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏

### "Permission denied"
```bash
chmod +x –Ω–∞–∑–≤–∞–Ω–∏–µ_—Ñ–∞–π–ª–∞.sh
```

### "No such file or directory"
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
pwd
cd /Users/stepankaldyshev/C/par_prog_2/lab_2
```

### "gcc-14: command not found"
```bash
# –ù–∞–π–¥–∏—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ gcc
ls /opt/homebrew/bin/gcc-*
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞–π–¥–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é
```

### –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π –ø–∞–º—è—Ç–∏
```bash
# –£–º–µ–Ω—å—à–∏—Ç–µ —Ä–∞–∑–º–µ—Ä –º–∞—Å—Å–∏–≤–æ–≤ –≤ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞—Ö
# ISIZE 5000 ‚Üí 3000
# JSIZE 5000 ‚Üí 3000
```

## –ë—ã—Å—Ç—Ä—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –≤–µ—Ä—Å–∏–π (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ git)

```bash
git add .
git commit -m "–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ 2 - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ"
git push
```
